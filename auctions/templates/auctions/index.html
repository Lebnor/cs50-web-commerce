{% extends "auctions/layout.html" %}
{% load static %}


{% block body %}
    <h1 class="text-center">Active Listings</h1>


    <div class="row">
    {% for listing in listings %}
    <div  class="listing border col-lg-5 col-10 mx-auto">
        <a href="{% url 'listing' listing.uuid listing.title %}">
           <h3 class="text-center text"> {{ listing.title }} </h3>
        </a>
           <p class="fs-1 text"> {{ listing.description }} </p>
            <hr>

           {% ifequal listing.winner user %}
            You won this listing
           {% else %}
            {% if listing.winner %}
            <p>Winner: {{ listing.winner }}</p>
            {% endif %}
            {% endifequal %}

            {% if listing.photourl %}
            <a href="{% url 'listing' listing.uuid listing.title %}">
                <img  class="w-25 mx-auto" src="{{ listing.photourl }}" alt="{{ listing.title }}">
            </a>
            {% endif %}
           <p>Current price: <strong> ${{ listing.total_price }} </strong> </p>
            <p>Number of followers: {{ listing.following.all|length }} </p>
            <p class="text-info">{% if user in listing.following.all %} <i>This item is in your watchlist </i> {%else %} {%endif%}</p>
           
           <!-- comments -->
            <p class="text-dark">There are {{ listing.comments.all|length }} comments on this item</p>
            
        </div>

        {% empty %}
        <p class="mx-auto text-center text-danger">There are no listings currently!</p>


    {% endfor %}
    </div>
    <br>
{% endblock %}